"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[285],{7868:function(e,r,n){n.d(r,{v:function(){return c},w:function(){return s}});var t=n(5861),a=n(4687),i=n.n(a),u=n(1243),o="46ee399c81006beac7a91a0ab15f7750";u.Z.defaults.baseURL="https://api.themoviedb.org/3/";var s=function(){var e=(0,t.Z)(i().mark((function e(r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.get("trending/all/day",{signal:r,params:{api_key:o,time_window:"week"}});case 2:return n=e.sent,e.abrupt("return",n.data.results);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),c=function(){var e=(0,t.Z)(i().mark((function e(r){var n,t,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.nameMovies,t=r.signal,e.next=3,u.Z.get("search/movie",{signal:t,params:{api_key:o,query:n,include_adult:!1,page:1}});case 3:return a=e.sent,e.abrupt("return",a.data.results);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()},5174:function(e,r,n){n.d(r,{Z:function(){return i}});var t=n(7689),a=n(184),i=function(e){var r=e.movies,n=(0,t.TH)(),i=function(e){return"/movies"===n.pathname?"".concat(e):"movies/".concat(e)};return(0,a.jsx)("ul",{children:r.map((function(e){var r=e.id,t=e.poster_path,u=e.original_language,o=e.title,s=e.release_date,c=e.original_title;return(0,a.jsx)("li",{children:(0,a.jsxs)("a",{href:i(r),to:i(r),state:{from:n},children:[(0,a.jsx)("img",{src:"https://image.tmdb.org/t/p/w500".concat(t),alt:o,width:"200"}),(0,a.jsx)("h2",{children:c}),(0,a.jsxs)("p",{children:["Original language: ",u]}),(0,a.jsxs)("p",{children:["Release date: ",s]})]})},r)}))})}},9285:function(e,r,n){n.r(r),n.d(r,{default:function(){return p}});var t=n(9439),a=n(2791),i=n(6727),u=n(1087),o=n(5705),s=n(7425),c=n(184);function l(e){var r,n=e.onChange,l=(0,u.lr)(),d=(0,t.Z)(l,2),f=d[0],h=d[1],v=null!==(r=f.get("queryMovie"))&&void 0!==r?r:"",p=i.Ry().shape({queryMovie:i.Z_().matches(/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/,"Name is invalid").required("Name is required")});(0,a.useEffect)((function(){v&&n(v)}),[v,n]);return(0,c.jsx)(o.J9,{initialValues:{queryMovie:""},validationSchema:p,onSubmit:function(e){var r=e.queryMovie;h(""!==r?{queryMovie:r}:{}),n(r)},children:function(e){var r=e.handleSubmit,n=e.errors;return(0,c.jsxs)(o.l0,{autoComplete:"off",onSubmit:r,children:[(0,c.jsx)(o.gN,{type:"text",name:"queryMovie",autoFocus:!0,placeholder:"Search movies"}),(0,c.jsxs)("button",{type:"submit",children:[(0,c.jsx)("span",{children:"Search"}),(0,c.jsx)(s.MGh,{})]}),n.queryMovie&&(0,c.jsx)("div",{children:n.queryMovie})]})}})}var d=n(6795),f=n(7868),h=n(1894),v=n(5174),p=function(){var e=(0,a.useState)([]),r=(0,t.Z)(e,2),n=r[0],i=r[1],u=(0,a.useState)(!1),o=(0,t.Z)(u,2),s=o[0],p=o[1],m=(0,a.useState)(""),g=(0,t.Z)(m,2),x=g[0],y=g[1],j=(0,a.useState)(null),b=(0,t.Z)(j,2),Z=b[0],_=b[1],w=(0,a.useRef)();(0,a.useEffect)((function(){if(""!==x){!function(){try{w.current&&w.current.abort(),w.current=new AbortController,p(!0),_(!1);var e=(0,f.v)(x,w.current.signal);0===e.length&&d.Am.info("Sorry, no movies were found for your request :("),i(e),_(null)}catch(Z){"AbortError"!==Z.name&&(_("Sorry, an error occurred :( Try reloading the page!"),p(!1))}finally{p(!1)}}()}}),[x]);return(0,c.jsxs)("div",{children:[(0,c.jsx)(d.Ix,{autoClose:3e3,theme:"colored"}),(0,c.jsx)(l,{onChange:function(e){e!==x&&(y(e),_(null))}}),s&&(0,c.jsx)(h.Z,{}),!s&&n.length>0&&(0,c.jsx)(v.Z,{movies:n}),Z&&(0,c.jsx)("div",{children:Z})]})}}}]);
//# sourceMappingURL=285.ec5e3e19.chunk.js.map